<!DOCTYPE html>
<html>
<head>
    {{template "template/css.html"}}
</head>
<body>
<div class="page">
    <!-- Main Navbar-->
    {{template "template/header.html"}}
    <div class="page-content d-flex align-items-stretch">
        <!-- Side Navbar -->
        <nav class="side-navbar">
            <!-- Sidebar Header-->
            <div class="sidebar-header d-flex align-items-center">
                <a href="/index/ui/">
                    <div class="avatar">
                        <img src="../../static/img/avatar-1.jpg" alt="..."
                             class="img-fluid rounded-circle">
                    </div>
                </a>
                <a href="#">
                    <div class="title">
                        <h1 class="h4">{{.userName}}</h1>
                        <p>欢迎您！</p>
                    </div>
                </a>
            </div>

            <!-- Sidebar Navidation Menus--><span class="heading">主菜单</span>
            <ul class="list-unstyled">
                <li><a href="/index/ui/"> <i class="icon-home"></i>首页 </a></li>
                <li>
                    <a href="#exampledropdownDropdown" aria-expanded="false" data-toggle="collapse"> <i
                                class="icon icon-user"></i>账户管理 </a>
                    <ul id="exampledropdownDropdown" class="collapse list-unstyled ">
                        <li><a href="/user_info/show_modify_ui">修改密码</a></li>
                        <li><a href="/user_info/show_ui">账户资料</a></li>
                        <li><a href="/index/show_pay_way_ui">通道配置</a></li>
                    </ul>
                </li>
                <li><a href="#exampledropdownDropdown1" aria-expanded="true" data-toggle="collapse"> <i
                                class="icon icon-presentation"></i>订单管理 </a>
                    <ul id="exampledropdownDropdown1" class=" list-unstyled ">
                        <li><a href="/path/to/query_order.html">查询订单</a></li>
                        <li class="active"><a href="/trade/show_ui">订单记录</a></li>
                        <li><a href="/trade/show_complaint_ui">投诉列表</a></li>

                    </ul>
                </li>
                <li><a href="#exampledropdownDropdown2" aria-expanded="false" data-toggle="collapse"> <i
                                class="icon icon-bill"></i>财务管理 </a>
                    <ul id="exampledropdownDropdown2" class="collapse list-unstyled ">
                        <li><a href="/withdraw/show_ui">申请提现</a></li>
                        <li><a href="/multi_withdraw/show_multi_ui">批量申请提现</a></li>
                        <li><a href="/withdraw/show_list_ui">提现记录</a></li>
                        {{/*                        <li><a href="/recharge/show_recharge_list_ui">自定义记录</a></li>*/}}
                        <li><a href="/history/show_history_list_ui">资产变动明细</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div class="content-inner">
            <!-- Page Header-->
            <header class="page-header">
                <div class="container-fluid">
                    <h2 class="no-margin-bottom">查询订单</h2>
                </div>
            </header>
            <!-- Forms Section-->
            <section class="forms">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header d-flex align-items-center">
                            <input type="text" class="form-control" id="merchant_No" placeholder="商户订单号" autofocus>
                            <button type="button" onclick="queryOrder()" class="btn btn-primary">搜索</button>
                        </div>
                        <div class="card-body">
                            <div id="searchResults"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
{{template "template/js.html"}}
<script type="application/javascript">
    function queryOrder() {
        var merchantNo = $('#merchant_No').val();
        var apiUrl = 'https://api.onepayph.com/api/v1/payment_intent/ref_trade_id/' + merchantNo;
        $.get(apiUrl, function(response) {
            var resultHtml = '<div class="order-details">';
            if (response && response.status === 'succeeded') {
                // 解析JSON数据并显示
                resultHtml += '<p><strong>ID（标识）:</strong> ' + response.id + '</p >' +
                              '<p><strong>Account ID（账户ID）:</strong> ' + response.account_id + '</p >' +
                              '<p><strong>Reference Trade ID（参考交易ID）:</strong> ' + response.ref_trade_id + '</p >' +
                              '<p><strong>Amount（金额）:</strong> ' + response.amount + ' ' + response.currency + '</p >' +
                              '<p><strong>Fee Amount（费用金额）:</strong> ' + response.fee_amount + '</p >' +
                              '<p><strong>Exchange Rate（汇率）:</strong> ' + response.exchange_rate + '</p >' +
                              '<p><strong>Callback URL（回调URL）:</strong> ' + response.callback_url + '</p >' +
                              '<p><strong>Description（描述）:</strong> ' + response.description + '</p >' +
                              '<p><strong>Customer Name（客户姓名）:</strong> ' + response.customer.first_name + ' ' + response.customer.last_name + '</p >' +
                              '<p><strong>Transaction Time（交易时间）:</strong> ' + new Date(parseInt(response.trans_at)).toLocaleString() + '</p >' +
                              '<p><strong>Status（状态）:</strong> ' + response.status + '</p >';
            } else {
                resultHtml += '<p>未找到数据或响应错误</p >';
            }
            resultHtml += '</div>';
            $('#searchResults').html(resultHtml);
        });
    }
</script>
</body>
</html>